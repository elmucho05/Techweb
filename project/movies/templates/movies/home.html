<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movies</title>

  {% load static %}  
  <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
</head>
<body>

  <!-- Navbar -->
  {% include "navbar.html" %}

  <!-- Content -->
  <div class="container py-5">

    <select class="form-select mb-5" id="selectGenre">
      <option selected>Generi</option>
      {% for genre in genres %}
      <option value="{{genre.0}}">{{genre.0}}({{genre.1}})</option>
      {% endfor %}
    </select>


    <div class="border-bottom mb-3">
      <h1 class="display-6 d-inline" style="font-size: 2rem;">Titoli del momento</h1>
      <a href="#" class="d-inline px-3 text-decoration-none">sfoglia tutti</a>
    </div>
    <div class="row row-cols-1 row-cols-md-4 g-4 mb-5">
      {% for film in films %}
      <div class="col">
        <div class="card h-100">
          <img src="{{ film.thumb.url }}" class="card-img-top" style="height: 200px;">
          
          <div class="card-body bg-light">
            <h6>{{ film.name }}</h6>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

  </div>


  <!-- Footer-->
  {% include "footer.html" %}
  



  <!-- include jquery js -->
  <script src="{% static 'jquery/jquery.js' %}"></script>
  <!-- include bootstrap js -->
  <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
  
  <script type="text/javascript">
    $(document).ready(function(){
      $("#selectGenre").on("change", function(e){
        const genre = $("option:selected", this).val();
        const newUrl = window.location.origin + `{% url 'browse' %}?genre=${genre}`; 
        window.location.href = newUrl;
      });
    });
    
  </script>
</body>
</html>